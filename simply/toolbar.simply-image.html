<section id="simply-image" class="simply-section">
	<h1>HTML Image Toolbar</h1>
	<div class="simply-toolbar">
		<ul class="simply-buttons">
			<li><button data-simply-section="simply-image-style" class="simply-expands"><i class="fa fa-magic"></i>Style</button></li>
			<li><button data-simply-section="simply-image-class" class="simply-expands"><i class="fa fa-paint-brush"></i>Class</button></li>
			<li><button data-simply-section="simply-image-align" class="simply-expands"><i class="fa fa-align-left"></i>Align</button></li>
			<li><button data-simply-section="simply-clipboard" class="simply-expands"><i class="fa fa-clipboard"></i>Clipboard</button></li>
			<li><button data-simply-section="simply-image-properties" class="simply-expands"><i class="fa fa-tags"></i>Properties</button></li>
			<li><button data-simply-section="simply-hyperlink" class="simply-expands"><i class="fa fa-link"></i>Link</button></li>
			<li><button data-simply-section="simply-code" data-simply-action="simply-edit-source"><i class="fa fa-code"></i>Code</button></li>
			<li><button data-simply-action="simply-hyperlink-follow"><i class="fa fa-external-link"></i>Follow link</button></li>
		</ul>
		<div class="simply-toolbar-section simply-image-style">
			<div>
				<label>Format</label><select class="simply-image-type" data-simply-action="simply-image-type">
					<option value="">Original</option>
				</select>
			</div>
		</div>
		<div class="simply-toolbar-section simply-image-class">
		</div>
		<div class="simply-toolbar-section simply-image-align">
			<ul data-type="simply-buttongroup-radio" style='display: inline-block;'>
				<li><button data-simply-action="simply-image-class" data-value="simply-image-align-left"><i class="fa fa-align-left"></i>Left</button></li>
				<li><button data-simply-action="simply-image-class" data-value="simply-image-align-right"><i class="fa fa-align-right"></i>Right</button></li>
				<li><button data-simply-action="simply-image-class" data-value="none"><i class="fa fa-times"></i>None</button></li>
			</ul>
			<ul data-type="simply-buttongroup-radio" style='display: inline-block;'>
				<li><button data-simply-action="simply-image-class" data-value="simply-image-align-top"><i class="fa fa-chevron-up"></i>Top</button></li>
				<li><button data-simply-action="simply-image-class" data-value="simply-image-align-bottom"><i class="fa fa-chevron-down"></i>Bottom</button></li>
				<li><button data-simply-action="simply-image-class" data-value="simply-image-align-middle"><i class="fa fa-chevron-right"></i>Middle</button></li>
				<li><button data-simply-action="simply-image-class" data-value="none"><i class="fa fa-times"></i>None</button></li>
			</ul>
		</div>
		<div class="simply-toolbar-section simply-image-properties">
			<div><label>URL</label><input type="text" class="simply-image-src" data-simply-action="simply-image-src"></div>
			<div><label>Alt</label><input type="text" class="simply-image-alt" data-simply-action="simply-image-alt"></div>
			<div><label>Title</label><input type="text" class="simply-image-title" data-simply-action="simply-image-title"></div>
		</div>
		<div class="simply-toolbar-section simply-hyperlink">
			<div><label>URL</label><input type="text" class="simply-hyperlink-href" data-simply-action="simply-hyperlink-href"></div>
			<div><label>Title</label><input type="text" class="simply-hyperlink-title" data-simply-action="simply-hyperlink-title"></div>
			<div><label>Name</label><input type="text" class="simply-hyperlink-name" data-simply-action="simply-hyperlink-name"></div>
			<div>
				<button class="simply-hyperlink-nofollow" data-simply-action="simply-hyperlink-nofollow"><i class="fa fa-chain-broken"></i>Nofollow</button>
				<button class="simply-hyperlink-newwindow" data-simply-action="simply-hyperlink-newwindow"><i class="fa fa-external-link"></i>New window</button>
				<button class="simply-hyperlink-unlink" data-simply-action="simply-hyperlink-unlink"><i class="fa fa-chain-broken"></i>Remove link</button>
			</div>
		</div>
		<div class="simply-toolbar-section simply-clipboard">
			<ul>
				<li><button class="simply-clipboard-cut"><i class="fa fa-scissors"></i>Cut</button></li>
				<li><button class="simply-clipboard-copy"><i class="fa fa-files-o"></i>Copy</button></li>
				<li><button class="simply-clipboard-paste"><i class="fa fa-clipboard"></i>Paste</button></li>
			</ul>
		</div>
	</div>
</section>

<section id="simply-image-field" class="simply-section">
	<h1>HTML Image Toolbar</h1>
	<div class="simply-toolbar">
		<ul class="simply-buttons">
			<li><button data-simply-section="simply-image-style" class="simply-expands"><i class="fa fa-magic"></i>Style</button></li>
			<li><button data-simply-section="simply-image-class" class="simply-expands"><i class="fa fa-paint-brush"></i>Class</button></li>
			<li><button data-simply-section="simply-image-properties" class="simply-expands"><i class="fa fa-tags"></i>Properties</button></li>
		</ul>
		<div class="simply-toolbar-section simply-image-style">
			<div>
				<label>Format</label><select class="simply-image-type" data-simply-action="simply-image-type">
					<option value="">Original</option>
				</select>
			</div>
		</div>
		<div class="simply-toolbar-section simply-image-class">
		</div>
		<div class="simply-toolbar-section simply-image-properties">
			<div><label>URL</label><input type="text" class="simply-image-src" data-simply-action="simply-image-src"></div>
			<div><label>Alt</label><input type="text" class="simply-image-alt" data-simply-action="simply-image-alt"></div>
			<div><label>Title</label><input type="text" class="simply-image-title" data-simply-action="simply-image-title"></div>
		</div>
	</div>
</section>

<script type="text/javascript">
	var currentImage;
	var currentLink;

	editor.plugins.image = {
		placeholderData : null,
		placeholder : function() {
			if (!editor.plugins.image.placeholderData) {
				// Create a nice placeholder image and insert that;
				var canvas = document.createElement("canvas");
				canvas.setAttribute("height", 60);
				canvas.setAttribute("width", 80);

				var ctx = canvas.getContext("2d");
				ctx.fillStyle = "#ccc";
				ctx.fillRect(0,0,canvas.getAttribute("width"), canvas.getAttribute("height"));
				ctx.fillStyle = "#eee";
				ctx.fillRect(2,2,canvas.getAttribute("width")-4, canvas.getAttribute("height")-4);

				ctx.font = "48px FontAwesome";
				ctx.fillStyle = "#999";
				ctx.textAlign = "center";
				ctx.textBaseline = "middle";

				// Use FontAwesome 'photo' icon;
				ctx.fillText("\uf03e", canvas.getAttribute("width")/2, canvas.getAttribute("height")/2);
				
				editor.plugins.image.placeholderData = canvas.toDataURL("image/png");
			}
			return editor.plugins.image.placeholderData;
		},
		reselect : function() {
			var sel = window.getSelection();
			var image = sel.baseNode.nextSibling;
			if (!image) {
				image = sel.baseNode.parentNode.nextSibling;
			}
			if (image.nodeType == 1 && image.tagName.toLowerCase() == "img") {
				var range = document.createRange();
				range.setStartBefore(image);
				range.setEndAfter(image);

				sel.removeAllRanges();
				sel.addRange(range);
				vdSelection.selectNode(image);
			} else {
				sel.removeAllRanges();
			}
		}
	};

	editor.addToolbar({
		"name" : "simply-image",
		"filter" : {
			"selector" : "IMG",
			"parent" : {
				"selector" : "*"
			}
		},
		"update" : function(toolbar) {
			var sel = vdSelectionState.get();
			var image = vdSelection.getNode(sel);

			var imagePos = hopeEditor.selection.getTotalOffset(image);
			hopeEditor.selection.start = imagePos;
			hopeEditor.selection.end = imagePos+1;

			var range = hopeEditor.selection.getRange();
			hopeEditor.currentRange = range;

			var annotation = hopeEditor.fragment.has(range, "img");
			
			var type=image.getAttribute('data-simply-image-type');
			if (!type || type=='undefined') {
				// type='Origineel'; // FIXME: gewoon de eerste in de lijst selecteren?
				type = toolbar.querySelectorAll(".simply-image-type option")[0].value;
			}
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-type'),type);

			var alt=image.getAttribute('alt');
			simply.widgets.properties.set(toolbar.querySelector('.simply-image.alt'),alt);

			if (toolbar.querySelector(".simply-toolbar-section.simply-image-class ul")) {
				toolbar.querySelector("[data-simply-section='simply-image-class']").parentNode.style.display = "block";
			} else {
				toolbar.querySelector("[data-simply-section='simply-image-class']").parentNode.style.display = "none";
			}

			var imageClasses = toolbar.querySelectorAll(".simply-image-align [data-type=simply-buttongroup-radio], .simply-image-class [data-type=simply-buttongroup-radio]");
			if (imageClasses) {
				var tempNode;
				if (annotation) {
					tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					tempNode = hopeEditor.field;
				}

				for (var i=0; i<imageClasses.length; i++) {
					var buttons = imageClasses[i].querySelectorAll("[data-value]");
					simply.widgets.properties.set(imageClasses[i], "none");
					for (var j=0; j<buttons.length; j++) {
						if (tempNode.classList.contains(buttons[j].getAttribute("data-value"))) {
							simply.widgets.properties.set(imageClasses[i], buttons[j].getAttribute("data-value"));
						}
					}
				}
			}

			var title=image.getAttribute('title');
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-title'), title);

			var src=image.getAttribute('src');
			if (src == editor.plugins.image.placeholder()) {
				src = "";
			}
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-src'), src);

			var hyperlink = hopeEditor.fragment.has(range, "a");

			toolbar.querySelector("button[data-simply-action=simply-hyperlink-follow]").parentNode.style.display = "none";
			if (hyperlink) {
				toolbar.querySelector("button[data-simply-action=simply-hyperlink-follow]").parentNode.style.display = "block";
				var linkNode = editor.plugins.hope.annotation.explode(hyperlink.tag);
				var hyperlinkHref = linkNode.getAttribute('href');
				simply.widgets.properties.set(toolbar.querySelector(".simply-hyperlink-href"), hyperlinkHref);

				var hyperlinkTitle = linkNode.getAttribute('title');
				simply.widgets.properties.set(toolbar.querySelector('.simply-hyperlink-title'), hyperlinkTitle);

				var hyperlinkName = linkNode.getAttribute('name');
				simply.widgets.properties.set(toolbar.querySelector('.simply-hyperlink-name'), hyperlinkName);
				
				var hyperlinkNofollow = toolbar.querySelector("button.simply-hyperlink-nofollow");
				if (linkNode.getAttribute("rel") && linkNode.getAttribute("rel").match(/nofollow/)) {
					hyperlinkNofollow.classList.add("simply-selected");
				} else {
					hyperlinkNofollow.classList.remove("simply-selected");
				}

				var hyperlinkUnlink = toolbar.querySelector("button.simply-hyperlink-unlink");
				if (hyperlinkUnlink) {
					toolbar.querySelector("button.simply-hyperlink-unlink").style.display = "inline-block";
				}

				var hyperlinkTargetBlank = toolbar.querySelector("button.simply-hyperlink-newwindow");
				if (hyperlinkTargetBlank) {
					if (tempNode.getAttribute("target") && tempNode.getAttribute("target").match(/_blank/)) {
						hyperlinkTargetBlank.classList.add("simply-selected");
					} else {
						hyperlinkTargetBlank.classList.remove("simply-selected");
					}
				}
			} else {
				simply.widgets.properties.set(toolbar.querySelector(".simply-hyperlink-href"), '');
				simply.widgets.properties.set(toolbar.querySelector('.simply-hyperlink-title'), '');
				simply.widgets.properties.set(toolbar.querySelector('.simply-hyperlink-name'), '');
				
				var hyperlinkNofollow = toolbar.querySelector("button.simply-hyperlink-nofollow");
				if (hyperlinkNofollow) {
					hyperlinkNofollow.classList.remove("simply-selected");
				}

				var hyperlinkUnlink = toolbar.querySelector("button.simply-hyperlink-unlink");
				if (hyperlinkUnlink) {
					toolbar.querySelector("button.simply-hyperlink-unlink").style.display = "none";
				}

				var hyperlinkTargetBlank = toolbar.querySelector("button.simply-hyperlink-newwindow");
				if (hyperlinkTargetBlank) {
					hyperlinkTargetBlank.classList.remove("simply-selected");
				}
			}

			// Set the parent icon for alignment as well;
			var currentIcon = document.querySelector("div.simply-image-align button.simply-selected i");
			if (!currentIcon || (currentIcon.parentNode.getAttribute("data-value") == "none")) {
				currentIcon = document.querySelector("div.simply-image-align button i");
			}
			if (currentIcon) {
				var icons = document.querySelectorAll("button[data-simply-section=simply-image-align] i");
				for (var i=0; i<icons.length; i++) {
					icons[i].className = currentIcon.className;
				}
			}
		},
		"init" : function(config) {
			var toolbar = document.querySelector("#" + this.name);
			if (typeof config === "object" && toolbar) {
				// Init block classes
				if (config.class) {
					var classSections = document.querySelectorAll('div.simply-toolbar-section.simply-image-class');
					for (var i=0; i<classSections.length; i++) {
						if (config.class.length) {
							classSections[i].innerHTML = '';
							for (var j=0; j<config.class.length; j++) {
								if (config.class[j].length) {
									var classList = config.class[j].slice();
									classList.push({class: "none", name: "Default", icon: "fa-times"});
									var list = document.createElement("UL");
									list.setAttribute("data-type", "simply-buttongroup-radio");
									for (var k=0; k<classList.length; k++) {
										var item = document.createElement("li");
										var button = document.createElement("button");
										button.setAttribute("data-value", classList[k].class);
										button.setAttribute("data-simply-action", "simply-image-class");
										button.innerHTML = "<i class='fa " + classList[k].icon + "'></i>" + classList[k].name;
										item.appendChild(button);
										list.appendChild(item);
									}
									classSections[i].appendChild(list);
								}
							}
						}
					}
				}
			}

			vdSetImage = function() {
				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");
				var type=simply.widgets.properties.get(toolbar.querySelector(".simply-image-type"));

				if (annotation) {
					var tempNode = editor.plugins.hope.annotation.explode(annotation.tag);

					if (type) {
						tempNode.setAttribute('data-simply-image-type',type);
					} else {
						tempNode.removeAttribute('data-simply-image-type');
					}

					hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					hopeEditor.fragment = hopeEditor.fragment.apply(annotation.range, editor.plugins.hope.annotation.implode(tempNode));
					hopeEditor.update();
					editor.plugins.image.reselect();
					vdStoreUndo();
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					if (type) {
						hopeEditor.field.setAttribute('data-simply-image-type',type);
					} else {
						hopeEditor.field.removeAttribute('data-simply-image-type');
					}
				}
			};


			// Disable user zoom, because it will zoom extremely weird when you select an image on android devices;
			var viewportMeta = document.head.querySelector("meta[name=viewport]");
			if (!viewportMeta) {
				viewportMeta = document.createElement("meta");
				viewportMeta.setAttribute("name", "viewport");
				viewportMeta.setAttribute("content", "user-scalable=no");
				document.head.appendChild(viewportMeta);
			} else {
				viewportMeta.setAttribute("content", viewportMeta.getAttribute("content") + ", user-scalable=no");
			}
		},
		"actions" : {
			'simply-image-class' : function(el) {
				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");
				if (annotation) {
					var tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
					if (tempNode.classList.contains(el.getAttribute("data-value"))) {
						tempNode.classList.remove(el.getAttribute("data-value"));
					} else {
						var buttons = el.parentNode.parentNode.querySelectorAll("[data-value]");
						for (var i=0; i<buttons.length; i++) {
							tempNode.classList.remove(buttons[i].getAttribute("data-value"));
						}
						if (el.getAttribute("data-value") !== "none") {
							tempNode.classList.add(el.getAttribute("data-value"));
						}
					}
				
					var newValue = editor.plugins.hope.annotation.implode(tempNode);

					if (annotation.tag != "") {
						hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					}
					hopeEditor.fragment = hopeEditor.fragment.apply(annotation.range, newValue);
					hopeEditor.update();
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					var buttons = el.parentNode.parentNode.querySelectorAll("[data-value]");
					for (var i=0; i<buttons.length; i++) {
						hopeEditor.field.classList.remove(buttons[i].getAttribute("data-value"));
					}
					if (el.getAttribute("data-value") !== "none") {
						hopeEditor.field.classList.add(el.getAttribute("data-value"));
					}
				}
			},
			"simply-image-type" : function() {
				vdSetImage();
			},
			"simply-image-delete" : function() {
				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");

				if (annotation) {
					hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					hopeEditor.update();
				}
			},
			"simply-image-alt" : function(value) {
				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");
				if (annotation) {
					var tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
					if (value) {
						tempNode.setAttribute("alt", value);
					} else {
						tempNode.removeAttribute("alt");
					}
					hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					hopeEditor.fragment = hopeEditor.fragment.apply(annotation.range, editor.plugins.hope.annotation.implode(tempNode));
					hopeEditor.update();
					editor.plugins.image.reselect();
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					if (value) {
						hopeEditor.field.setAttribute("alt", value);
					} else {
						hopeEditor.field.removeAttribute("alt");
					}
				}
			},
			"simply-image-title" : function(value) {
				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");
				if (annotation) {
					var tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
					if (value) {
						tempNode.setAttribute("title", value);
					} else {
						tempNode.removeAttribute("title");
					}
					hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					hopeEditor.fragment = hopeEditor.fragment.apply(annotation.range, editor.plugins.hope.annotation.implode(tempNode));
					hopeEditor.update();
					editor.plugins.image.reselect();
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					if (value) {
						hopeEditor.field.setAttribute("title", value);
					} else {
						hopeEditor.field.removeAttribute("title");
					}
				}
			},
			"simply-image-src" : function(value) {
				value = value.replace(/\\/g, "/");

				var range = hopeEditor.currentRange;
				var annotation = hopeEditor.fragment.has(range, "img");
				if (annotation) {
					var tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
					if (value) {
						tempNode.setAttribute("src", value);
					} else {
						tempNode.setAttribute("src", editor.plugins.image.placeholder());
					}
					hopeEditor.fragment = hopeEditor.fragment.remove(annotation.range, annotation.tag);
					hopeEditor.fragment = hopeEditor.fragment.apply(annotation.range, editor.plugins.hope.annotation.implode(tempNode));
					hopeEditor.update();
					editor.plugins.image.reselect();
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					if (value) {
						hopeEditor.field.setAttribute("src", value);
					} else {
						hopeEditor.field.setAttribute("src", editor.plugins.image.placeholder());
					}
				}
			},
			"simply-insert-image" : function() {
				var imageSrc = editor.plugins.image.placeholder();
				var range = hopeEditor.currentRange;

				var imageFragment = hope.fragment.create("\u00AD", '0-1:img src="' + imageSrc + '"');
				hopeEditor.fragment = hopeEditor.fragment.insert(range.start, imageFragment);

				range = hope.range.create(range.start, range.start+1);

				hopeEditor.fragment = hopeEditor.fragment.apply(range, 'img src="' + imageSrc + '"');
				hopeEditor.update();
				editor.plugins.image.reselect();
			}
		}
	});

	editor.addToolbar({
		"name" : "simply-image-field",
		"filter" : {
			"selector" : "IMG[data-simply-field]",
			"parent" : {
				"selector" : "*"
			}
		},
		"update" : function(toolbar) {
			var sel = vdSelectionState.get();
			var image = vdSelection.getNode(sel);

			hopeEditor = {
				field : image,
				parseHTML : function(){},
				fragment : {
					has : function() {
						return false;
					}
				}
			};

			var annotation = false;

			var type=image.getAttribute('data-simply-image-type');
			if (!type || type=='undefined') {
				// type='Origineel'; // FIXME: gewoon de eerste in de lijst selecteren?
				type = toolbar.querySelectorAll(".simply-image-type option")[0].value;
			}
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-type'),type);

			var alt=image.getAttribute('alt');
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-alt'),alt);

			if (toolbar.querySelector(".simply-toolbar-section.simply-image-class ul")) {
				toolbar.querySelector("[data-simply-section='simply-image-class']").parentNode.style.display = "block";
			} else {
				toolbar.querySelector("[data-simply-section='simply-image-class']").parentNode.style.display = "none";
			}

			var imageClasses = toolbar.querySelectorAll(".simply-image-align [data-type=simply-buttongroup-radio], .simply-image-class [data-type=simply-buttongroup-radio]");
			if (imageClasses) {
				var tempNode;
				if (annotation) {
					tempNode = editor.plugins.hope.annotation.explode(annotation.tag);
				} else if (hopeEditor.field.tagName.toLowerCase() === "img") {
					tempNode = hopeEditor.field;
				}

				for (var i=0; i<imageClasses.length; i++) {
					var buttons = imageClasses[i].querySelectorAll("[data-value]");
					simply.widgets.properties.set(imageClasses[i], "none");
					for (var j=0; j<buttons.length; j++) {
						if (tempNode.classList.contains(buttons[j].getAttribute("data-value"))) {
							simply.widgets.properties.set(imageClasses[i], buttons[j].getAttribute("data-value"));
						}
					}
				}
			}

			var title=image.getAttribute('title');
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-title'), title);

			var src=image.getAttribute('src');
			if (src == editor.plugins.image.placeholder()) {
				src = "";
			}
			simply.widgets.properties.set(toolbar.querySelector('.simply-image-src'), src);

			// Set the parent icon for alignment as well;
			var currentIcon = document.querySelector("div.simply-image-align button.simply-selected i");
			if (!currentIcon || (currentIcon.parentNode.getAttribute("data-value") == "none")) {
				currentIcon = document.querySelector("div.simply-image-align button i");
			}
			if (currentIcon) {
				var icons = document.querySelectorAll("button[data-simply-section=simply-image-align] i");
				for (var i=0; i<icons.length; i++) {
					icons[i].className = currentIcon.className;
				}
			}
		},
		"init" : function(config) {
			var toolbar = document.querySelector("#" + this.name);
			if (typeof config === "object" && toolbar) {
				// Init block classes
				if (config.class) {
					var classSection = toolbar.querySelector('div.simply-toolbar-section.simply-image-class');
					if (classSection) {
						if (config.class.length) {
							classSection.innerHTML = '';
							for (var i=0; i<config.class.length; i++) {
								if (config.class[i].length) {
									var classList = config.class[i].slice();
									classList.push({class: "none", name: "Default", icon: "fa-times"});
									var list = document.createElement("UL");
									list.setAttribute("data-type", "simply-buttongroup-radio");
									for (var j=0; j<classList.length; j++) {
										var item = document.createElement("li");
										var button = document.createElement("button");
										button.setAttribute("data-value", classList[j].class);
										button.setAttribute("data-simply-action", "simply-image-class");
										button.innerHTML = "<i class='fa " + classList[j].icon + "'></i>" + classList[j].name;
										item.appendChild(button);
										list.appendChild(item);
									}

									classSection.appendChild(list);
								}
							}
						}
					}
				}
			}
		}
	});
</script>