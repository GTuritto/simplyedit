<!DOCTYPE HTML>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title data-simply-field="meta title">Simply edit - RSS datasource example</title>
	<meta name="description" content="Simple edit testpage description" data-simply-field="meta description">
	<meta name="robots" content="noindex,nofollow" data-simply-field="meta robots">
	<meta name="author" content="" data-simply-field="meta author">
	<meta name="page-template" content="index.html" data-simply-field="data-simply-page-template">
	<meta charset="utf-8"> 
	<style type="text/css">
		html,body {
			padding: 0;
			margin: 0;
		}

		@media (max-width: 481px) {
			.article.large {
				position: relative;
				height: 100%;
				width: 100%;
				display: inline-block;
				vertical-align: top;
				box-sizing: border-box;
				border: 5px solid transparent;
			}
			.article.small {
				position: relative;
				height: 50%;
				width: 50%;
				display: inline-block;
				vertical-align: top;
				border: 5px solid transparent;
				box-sizing: border-box;
			}
		}

		@media (min-width: 481px) {
			.article.large {
				position: relative;
				height: 50%;
				width: 50%;
				display: inline-block;
				vertical-align: top;
				box-sizing: border-box;
				border: 5px solid transparent;
			}
			.article.small {
				position: relative;
				height: 33.3333%;
				width: 33.3333%;
				display: inline-block;
				vertical-align: top;
				border: 5px solid transparent;
				box-sizing: border-box;
			}
		}
		@media (min-width: 768px) {
			.article.large {
				position: relative;
				height: 50%;
				width: 50%;
				display: inline-block;
				vertical-align: top;
				box-sizing: border-box;
				border: 5px solid transparent;
			}
			.article.small {
				position: relative;
				height: 25%;
				width: 25%;
				display: inline-block;
				vertical-align: top;
				border: 5px solid transparent;
				box-sizing: border-box;
			}
		}
		@media (min-width: 960px) {
			body > div {
				width: 960px;
				margin: 0px auto;
			}
		}

		.article a {
			text-decoration: none;
			color: inherit;
		}
		.article a img {
			border: 0;
		}
		.article h1,
		.article h2 {
			position: absolute;
			z-index: 2;
			font-family: helvetica;
			padding: 10px;
			width: 100%;
			box-sizing: border-box;
		}
		.article h1 {
			top: 0;
			font-size: 16px;
			background-color: rgba(255,255,255,0.6);
		}
		.article h2 {
			bottom: 0;
			font-size: 12px;
			font-weight: normal;
			background-color: rgba(255,255,255,0.8);
			margin: 0;
		}
		.article.large:nth-child(2) h1 {
			text-align: right;
		}
			
		.article div {
			position: absolute;
			z-index: 2;
			bottom: 3em;
			background-color: rgba(255,255,255,0.8);
			padding: 10px;
			font-family: helvetica;
			font-size: 13px;

		}
		.article img {
			width: 100%;
			float: left;
			z-index: 1;
		}
		
		.article:after {
			content: '';
			display: block;
			clear: both;
		}
		.simply-empty:after { 
                        text-align: center;
                        content: "Loading...";
                        display: block;
                        position: absolute;
                        top: 50px;
                        left: 50%;
                        margin-left: -120px;
                        width: 200px;
                        padding: 20px;
                        background-color: #f8f8f8;
                        font-family: helvetica;
                        border: 1px solid #888;
                        border-radius: 20px;
                        box-shadow: 2px 2px 5px 0px #333;
                }
	</style>
</head>
<body>
	<div data-simply-list="news" data-simply-data="newsList">
		<template data-simply-template="large"><div class="large article">
			<a href="#" data-simply-field="url">
				<img src="" data-simply-field="image">
				<h1 data-simply-field="title">title</h1>
				<div data-simply-field="description">description</div>
			</a>
		</div></template>
		<template data-simply-template="small"><div class="small article">
			<a href="#" data-simply-field="url">
				<h2 data-simply-field="title">title</h1>
				<img src="" data-simply-field="image">
			</a>
			</div></template>
	</div>
	<script src="/simply-edit/js/simply-edit.js" 
		data-api-key="muze" 
		data-simply-endpoint="http://yvo.muze.nl/ariadne/loader.php/system/users/yvo/simply-store/"
		data-simply-images="http://yvo.muze.nl/ariadne/loader.php/system/users/yvo/simply-store/img/"
	></script>
	<script>
		var http = new XMLHttpRequest();
		var url = "http://crossorigin.me/http://www.nu.nl/rss/Tech";

		http.open("GET", url, true);
		http.onreadystatechange = function() {//Call a function when the state changes.
			if(http.readyState == 4) {
				if (http.status == 200) {
					var parser = new DOMParser();
					var xmlDoc = parser.parseFromString(http.responseText, "text/xml");

					var items = xmlDoc.querySelectorAll("item");
					var result = [];
					for (var i=0; i<items.length; i++) {
						result.push({
							title : items[i].querySelector("title").innerHTML.replace("&amp;", "&"),
							description : items[i].querySelector("description").innerHTML.replace("&amp;", "&"),
							image : items[i].querySelector("enclosure").getAttribute("url"),
							url : {
								href : items[i].querySelector("link").innerHTML.replace("&amp;", "&")
							},
							"data-simply-template" : ((i < 2) ? "large" : "small" )
						});
					}
					editor.addDataSource("newsList", result);
				}
			}
		};
		http.send();
	</script>
</body>
</html>