<section id="simply-googlemap" class="simply-section">
	<h1>HTML Google map toolbar</h1>
	<div class="simply-toolbar">
		<ul class="simply-buttons">
			<li><button data-simply-section="simply-googlemap-properties" class="simply-expands"><i class="fa fa-link"></i>Map coordinates</button></li>
		</ul>
		<div class="simply-toolbar-section simply-googlemap-properties">
			<div><label>Latitude</label><input class="latitude" type="text" data-simply-action="simply-googlemap-coordinates"></div>
			<div><label>Longitude</label><input class="longitude" type="text" data-simply-action="simply-googlemap-coordinates"></div>
			<div><label>Zoom</label><input class="zoom" type="text" data-simply-action="simply-googlemap-coordinates"></div>
		</div>
	</div>
</section>
<script type="text/javascript">
	editor.addToolbar({
		"name" : "simply-googlemap",
		"filter" : {
			"selector" : "google-map",
			"parent" : {
				"selector" : "*"
			}
		},
		"update" : function(toolbar) {
			var sel = vdSelectionState.get();
			var map = vdSelection.getNode(sel);

			vdSelectionState.currentSelection = sel;
			vdSelectionState.currentNode = map;

			var latitude  = map.getAttribute('latitude');
			var longitude = map.getAttribute('longitude');
			var zoom      = map.getAttribute('zoom');
			simply.widgets.properties.set(toolbar.querySelector("input.latitude"), latitude);
			simply.widgets.properties.set(toolbar.querySelector("input.longitude"), longitude);
			simply.widgets.properties.set(toolbar.querySelector("input.zoom"), zoom);
		},
		"init" : function() {
		},
		"actions" : {
			"simply-googlemap-coordinates" : function() {
				var sel = vdSelectionState.get();
				var map = vdSelection.getNode(sel);
				map.setAttribute("latitude", simply.widgets.properties.get(document.querySelector("#simply-googlemap input.latitude")));
				map.setAttribute("longitude", simply.widgets.properties.get(document.querySelector("#simply-googlemap input.longitude")));
				map.setAttribute("zoom", simply.widgets.properties.get(document.querySelector("#simply-googlemap input.zoom")));
			}
		}
	});
</script>