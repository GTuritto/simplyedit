<section id="vedor-iframe" class="vedor-section">
	<h1>HTML Iframe Toolbar</h1>
	<div class="vedor-toolbar">
		<ul class="vedor-buttons">
			<li><button data-vedor-section="vedor-iframe-properties" class="vedor-expands"><i class="fa fa-link"></i>IFrame target</button></li>
		</ul>
		<div class="vedor-toolbar-section vedor-iframe-properties">
			<div><label>URL</label><input type="text" id="vdIframeSrc" data-vedor-action="vedor-iframe-src"></div>
		</div>
	</div>
</section>
<script type="text/javascript">
	var currentIframe;

	editor.addToolbar({
		"name" : "vedor-iframe",
		"filter" : {
			"selector" : "IFRAME",
			"parent" : {
				"selector" : "*"
			}
		},
		"update" : function(toolbar) {
			var sel = vdSelectionState.get();
			var iframe = vdSelection.getNode(sel);

			vdSelectionState.currentSelection = sel;
			vdSelectionState.currentNode = iframe;

			var src=iframe.getAttribute('src');
			vedor.widgets.properties.set('vdIframeSrc', src);
		},
		"init" : function() {
		},
		"actions" : {
			"vedor-iframe-delete" : function() {
				var sel = vdSelectionState.get();
				var iframe = vdSelection.getNode(sel);
				iframe.parentNode.removeChild(iframe);
			},
			"vedor-iframe-src" : function(value) {
				console.log("src change");
				if (vdSelectionState.currentNode) {
					if (value) {
						vdSelectionState.currentNode.setAttribute("src", value);
					} else {
						vdSelectionState.currentNode.setAttribute("src", '');
					}
				}
			}
		}
	});
</script>